import unittest
from circleutils import Collection
import hashlib


SAMPLE_DATA = {'date': 20210809, 'content': {'- good scores': ['ffd15440497451079d4244d73460e09d', '1c65239ed051d9161855500b665f4b6e', '690c6f208909cdaeb73676f49f9c4f58', '933f07f1b82c8c5d040bce9cb40754c7', '2c561cb479c5eb4a4e17f3f05b439fc6', '26153c6d21482abb00f84acc714df18f', 'a9e2a2812e086e277c0d7cf838c7f840', '2bcb79c196b8918a219167a7027978d8', '557eb4926b8d75bb173a001c6d182498', 'd6fc7102daed7780268b1fe0bf07e9c4', 'ee3e99a713cf27197ce0b2b164b18fe0', '98f3ba02ad0faa5aa4558291d1ff8270', '2871c66d9de5b5e029082a84f31ea352', 'ac71193eff22971fa7fac7c6f1de270f', '51df706f2ab81ee97e8aaf6a0ad4e558', 'fd9e2d672e29725973841f4cf8c512e9', '6d33e866c467a04fb432b8a4c7e82e05', 'ffec529f8af9d2649289ea6ee6133ed0', '7fdb5f483f9fe3e4ed8178259ed16604', '3fe4e8dabe26c22774b90fed86af22c0', 'cfe7be67b09097f50cc0447b78015685', '8eaf150483418092c3bba8b009deb6ed', '4596324fddf66053d305889b658c468a', 'd1cade862f0f242c59fce2470fa0daef', '84ea145caa9f99ff2ddd90d18fe23808', '53285fe5ddc4eaaa6a55ca2a948d7f2a', 'd62838b4200ef3103ec81c624e4239a6', 'e671aa25517127b073c704ba5287fa3b', '0049ce0744b10adff43c6c7094abbb46', '4b6e0e885c03cf62f4c28e92e013df0d'], 'banger': ['a4cadd4d07d63b765d2396e2c952392b', '7bab58317e12998f204f440b7dd8aee9', '823b70b8100d8187173d7a2394d7d7a2', '0331a9d58ceb48d8126b42af306d707e', 'cb4373896fcb216634c55604d1c988af', 'e668a69d0365596bd517a2519864cbb3', '15e7d74e60729cf2bfaf3b72b9b59153', 'e6541c747b2c9fd9f7e44e93b5a21459', 'fcccf78c1935ed057eb310792f231d0a', '68eb17a605c3ac50bfc59e8f2f59ab2d', 'f94d23c2e8426072e020b19a91b447d6', 'a3773e787a872815ddcdf7aad82e4d5d', 'd1f433a83ffcb5b19a6150f892227d25', '9a6e824d3e8ea5eab785ad02651e6f30', 'e3a2b13c86ce63e500dfb15403c6db34', 'a0b299003088e95df962e928921c7fcb', '7a99606706eb488293371ae0b88ca23b', '18bdc8d52ea0b17a9bc2f5686a6adf8e', '90fd2fd84ed2be67087c90605aa88f49', '2bcb79c196b8918a219167a7027978d8', 'cb27de8483c098c855ecddda03156532', '4793464f805e8fbbadb1ecea36dbc09e', '3badc115d19673e7b1d9d3247eb4591c', 'd7dd49c514aea5fee2671893d8875b27', '0dc5e002648559f57234e6d45e49df0a', '4e4aa3168e33ed108a490a2425511c2f', '76f75b3e7b874718a88780b33a82bc76', 'd2543aa5192b1f02bb35fe7a49a47169', '14d7f883c10df5b41f1aed5eb111a006', 'cf126ee22ea837bdafdad25cd9bb6b00', 'd6f61ce8e42f472d325bdc5fbd45b575', '33a02d5dcde30ba6ecc18872ef51afa0', 'b1109530aa603d0ff79c61415c12745a', '9347e3427e7046dd60f2c0e5371ebe7e', 'a1adcfc6b5bf5769df8dc444ed258f90', '532be5fa2f036bf38911a4052e7582e0', 'e76604874143670fdbfebfe9f5145d2a', '5dbd6dcb543a68d3e2958a507c99c04a', '06c7b19eaed1d0561419647390d6f201', 'd3bd8ef8cf8be708d472a438eb13a162', 'e9c7461fd546e1ea7cd80b1678a97a24', '9c24c1d5da991e9c271b1002944b3657', '564a2623292a9934c29b72c355aa8b67', '20f5de4b9fe5a8908e3d0e934bd9e5f2', '2dd9edbb3518ed7d753e19dabe1422fd', '8140b4f31f38e897b2c40274bebd489d', 'cedecf47a13e72994bd24fcc101bab50', 'cd2c8ce14c2992ed81d53313e50b4c89', 'c615c0fbbffa9942497a9ebdaa6df5a2', 'af31ce623569a86e7801cfa122dd06b8', '06fe5c48a082ed11b7a9ef3fd7c58774', '3410a2d9bb312b4683125b1b87512a23', '3b53bd19355bf28c197a1fdb56c99667', 'a664472d2766ec7ccb26d966b5a81c10', '399447bcc942df41f9afa4bfbccdf99d', '7955586520030328b18eea29c5cbeed8', 'f4295abebd127d46a2cdf9ee921fd730', 'c7b10939b1a6c01c72e482b9afc261c9', 'd60c7c025bb0a79eb9ef5cee1858d581', 'a705e7c4659ff239dadb350eb71676e0', '130614130a081fd877ec25d6ba1ae33d', 'c91819dc828feb13817ba3372e0bb376', 'a132abe3c17d9317345cd34a2db88eca', 'c61a7177f4f367735aa853cbd2f53240', '78432349074277200c795bb74291f537', '0995586a865fc5d205ece4ba3de5e047', '7497aa357f558fbdcfb84ffada2d5973', '20861c37038ae57dbd6782c937536184', '2ee566c2570ebe78fef7263cd103e62d', '56e668c545afd16dc7437d82eaf37f65', 'acc6dab824a288afaed43425bff8ab45', 'fc8572d61971e2228cea3c50db75c4b2', '8a75378f25a41a14de5af86aed9cd0a5', 'a4d83d50944c62ed10a864586df98461', '6b29e26e028c457829de08f1af8b076c', 'afacbaa5cd281d15f5baf04163721e0e', '4d3bcea52c43cc36f2d9b92143044be7', 'b4eff2d50ed6b321ccbf6d8212f6ec0c', 'ae2e94f857fa95fcb56acb494adf6eb1', '81f7780e9299d353d3153e82081439fa', '3411eab77e9fd0999564d4d36d3e1db3', '59af2a9f54abf8a3500c485a6ad2c77d', '131b810bea296be79c22c510aff63345', '8a2bd8942db041bd51e44ef38f7f53de', 'd03dfd748c1526b95e3f8dbcd8b65a3e', '2edd5abd265cf0b3c41fc060b64dae07', 'd76d28f08bd68addf7a4668cdd58b058', '379ac053c5d74e407007227efcc4defa', 'fe1c83d7baebe646555711063513ee96', '422a0c791a7e6f10bd609ca91b16c508', 'b21cff4d295f05fcf7132022d0f59725', '2e5b1d317efbc586fb90536902965985', '0703be4643f5ba9a14eab55e2393693d', '4a6f5626848acb21429e0a3c8fb64d82', '6e0e6ecd1f63bc8a05226750a0b37037', 'c88c70161e20e346d496dfd1232a4cdb', '80ad50a1566ab5dfabf498e982bce51d', 'd408efec7bc9b67531ec3f0eaea3c41f', '7e228462a543a82d90e42d802782cf5f', 'a0415c8f9552a7061bb28f37e4001906', '08eacb1190fe6e833378a13e8194d4bf', 'b88238363261509b70657b4f5d7048c4', '7ce7ad9baf049c93306f03bfc5250778', 'a9e2a2812e086e277c0d7cf838c7f840', 'f5ce9819d58f9b4b583f5dacac0fc942', 'a66158095d79e820e16382e636d445ae', '86a5a710a33f699fde789fb606d3b761', 'eedce5e2d5d477c0643e24094dea619d', '30fc8bdccb65bbfa43ba1fc385911d80', '138a0dafe3bc06de86cea2792029a1fc', 'e9acdfc55732127f5f38d8a983f5e7b2', 'd3552eeecf25c54b3842b1776d09133e', '389a270257586a45743ca2d164668b30', 'a138dc2c8749caada1991d08ff4a9771', 'c6bacf685fc9e48eb1318eff9f26681b', '7e4fe081c3697798321c6a7fb85ed9be', '8f576bf8d4abc104f9a08b79bf05fa21', '253b34bb58a2768a08a4e303cfbb2cfc', 'b689ae7eb3f1b9e12703052981add822', '838a0918580632ab263e75ba9c20dd37', 'b7aa5d04dd998984e5e78884d2839eee', 'd0affda3b55730aed91d3544a05a2720', '4de1565c8f3c32ff13baf32d602f44b1', '17854fd727075935c445698628fda44d', '4b4c398fe6e3312e8912b42116000c6f', '3eb9fb303aa7f3a4cabc47b2de0f0c2a', '107c174fb20338698b89b30fb3e04acb', 'b51018a7cce52683821a8e1e03158afd', 'd097aafb05708d93d1505cfbe99282af', 'dd71794aa0f029dfb73e15525577941e', 'af1f43cd9dee6e3a1721809c0a9f0484', '9e5610a27570d3ed8633c1541cc6305a', '15d719bd3e55ba6f4f2ab8f059e77904', 'f2bdc223d0ac7fd32344c45c75b7b41b', '3c08098df40587d4fdd602eca705eb2c', 'a1fcd0c3f880c858402aa85c93c01dcd', '67986e50a0cdab35ab4d52eb4747ce64', '07ab677886e086c5dbfacd2e7e6faf47', '26796873895752e2379183d1f6c8216c', '4d385b917b1df64f13a6b2a664ea8f56', 'b66ebdb747d5b74c5153327d390f873d', 'cfe7be67b09097f50cc0447b78015685', 'ec566c1a6626f9681a7a3bbd4f9063ba', '09979aa1f451423116024f0609025e41', 'a01df0a47f2726e0d04d643f1c44302c', 'fe3cd9743f44d62318a3751735b4f4de', 'f93c1b8684f9d2f16cadd0717b463be9', '4ff2ab678415b4d14863c650814d7406', 'f2243954fda4a208dde9c1ac7e575925', 'f4be17941e6f953641acf75e5e9b86aa', '1ab09ae94041684555abec03edd9f8bf', '232be7239341bba979e456017d8bd487', '8f689853df19da364451f60e069d0712', 'c686ab42cb1c7a979bf9c3705b3a7a29', '385302ab1ca734c70138c46599daa5f4', '183487b10ff1852be1ee6f4a984128e9', '53285fe5ddc4eaaa6a55ca2a948d7f2a', '9e47da6c30f7e8eee6b8db0088c801f0', 'deb001ad993d2e1fa8bbf0ad68d2c0e9', 'ee7438717de60ae0919c3f58f00b891f', '8d97c09c499b2bce7c0bfe382a35a886', '4bd12a13a65948809f3d24a6f1d67393', '8ec39f7ff32350b412b70494b11858a7', 'd90ed83e04af712a40fa6ca3bf5225a7', 'eb139c04485c154e9fc20f8dfb5625bc', '8466267292788cee91bd79899b154a59', '4a74f14bc9dcd7f2daabfa6cbf3c3ff5', 'a74e6e58f547cc0bb5292854ddd53b81', 'bfc655a517b51e82b579a5daa45f1624', '6166bfa97e2599fec458bca30fc05192', '1c307ed90b3d0a2a649d407a44fe2120', '057a19c28b7779e226a1febd500bf783', 'cb38783ba2cb23f09f2f7674fca0495f']}}
SAMPLE_DB = "ressources/collection_sample.db"
SAMPLE_DB_HASH = "1328738F2B22C20F155576EC197A2E3B59D103CDDFE0B95CEE4A7E9CE32465A3"


class TestCollection(unittest.TestCase):
    def test_read(self):
        col = Collection.read(SAMPLE_DB)
        self.assertEqual(col.date, SAMPLE_DATA["date"])
        self.assertEqual(col.content, SAMPLE_DATA["content"])

    def test_convert(self):
        raw_data = Collection(**SAMPLE_DATA).to_bytes()
        col_hash = hashlib.sha256(raw_data).hexdigest().upper()
        self.assertEqual(col_hash, SAMPLE_DB_HASH)


if __name__ == '__main__':
    unittest.main()
    